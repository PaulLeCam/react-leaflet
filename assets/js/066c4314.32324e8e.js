"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["7979"],{9235:function(n,e,t){t.r(e),t.d(e,{metadata:()=>o,contentTitle:()=>i,default:()=>m,assets:()=>p,toc:()=>l,frontMatter:()=>s});var o=JSON.parse('{"id":"example-react-control","title":"React control","description":"A custom control displaying a miniature map using React","source":"@site/versioned_docs/version-3.x/example-react-control.md","sourceDirName":".","slug":"/example-react-control","permalink":"/docs/v3/example-react-control","draft":false,"unlisted":false,"tags":[],"version":"3.x","frontMatter":{"title":"React control"},"sidebar":"docs","previous":{"title":"Animated panning","permalink":"/docs/v3/example-animated-panning"},"next":{"title":"External state","permalink":"/docs/v3/example-external-state"}}'),a=t("1549"),r=t("2376");let s={title:"React control"},i=void 0,p={},l=[];function c(n){let e={code:"code",p:"p",pre:"pre",...(0,r.a)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:"A custom control displaying a miniature map using React"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-tsx",children:"import { useCallback, useMemo, useState } from 'react'\nimport {\n  MapContainer,\n  Rectangle,\n  TileLayer,\n  useMap,\n  useMapEvent,\n} from 'react-leaflet'\n\n// Classes used by Leaflet to position controls\nconst POSITION_CLASSES = {\n  bottomleft: 'leaflet-bottom leaflet-left',\n  bottomright: 'leaflet-bottom leaflet-right',\n  topleft: 'leaflet-top leaflet-left',\n  topright: 'leaflet-top leaflet-right',\n}\n\nconst BOUNDS_STYLE = { weight: 1 }\n\nfunction MinimapBounds({ parentMap, zoom }) {\n  const minimap = useMap()\n\n  // Clicking a point on the minimap sets the parent's map center\n  const onClick = useCallback(\n    (e) => {\n      parentMap.setView(e.latlng, parentMap.getZoom())\n    },\n    [parentMap],\n  )\n  useMapEvent('click', onClick)\n\n  // Keep track of bounds in state to trigger renders\n  const [bounds, setBounds] = useState(parentMap.getBounds())\n  const onChange = useCallback(() => {\n    setBounds(parentMap.getBounds())\n    // Update the minimap's view to match the parent map's center and zoom\n    minimap.setView(parentMap.getCenter(), zoom)\n  }, [minimap, parentMap, zoom])\n\n  // Listen to events on the parent map\n  const handlers = useMemo(() => ({ move: onChange, zoom: onChange }), [])\n  useEventHandlers({ instance: parentMap }, handlers)\n\n  return <Rectangle bounds={bounds} pathOptions={BOUNDS_STYLE} />\n}\n\nfunction MinimapControl({ position, zoom }) {\n  const parentMap = useMap()\n  const mapZoom = zoom || 0\n\n  // Memoize the minimap so it's not affected by position changes\n  const minimap = useMemo(\n    () => (\n      <MapContainer\n        style={{ height: 80, width: 80 }}\n        center={parentMap.getCenter()}\n        zoom={mapZoom}\n        dragging={false}\n        doubleClickZoom={false}\n        scrollWheelZoom={false}\n        attributionControl={false}\n        zoomControl={false}>\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n        <MinimapBounds parentMap={parentMap} zoom={mapZoom} />\n      </MapContainer>\n    ),\n    [],\n  )\n\n  const positionClass =\n    (position && POSITION_CLASSES[position]) || POSITION_CLASSES.topright\n  return (\n    <div className={positionClass}>\n      <div className=\"leaflet-control leaflet-bar\">{minimap}</div>\n    </div>\n  )\n}\n\nfunction ReactControlExample() {\n  return (\n    <MapContainer center={[51.505, -0.09]} zoom={6}>\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n      <MinimapControl position=\"topright\" />\n    </MapContainer>\n  )\n}\n"})})]})}function m(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},2376:function(n,e,t){t.d(e,{Z:function(){return i},a:function(){return s}});var o=t(4194);let a={},r=o.createContext(a);function s(n){let e=o.useContext(r);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);